       1                                ;
       2                                ;    **************************************
       3                                ;    * Check BYTE Operations
       4                                ;    **************************************
       5                                ;
       6                                    .PSECT PTR,ABS
       7 001000                             .=1000
       8 001000 000500                  A1: .WORD 500
       9 001002 000501                  A2: .WORD 501
      10 001004 000502                  A3: .WORD 502
      11 001006 000503                  A4: .WORD 503
      12 001010 000504                  A5: .WORD 504
      13 001012 000505                  A6: .WORD 505
      14 001014 000506                  A7: .WORD 506
      15 001016 000510                  A11: .WORD 510
      16 001020 000511                  A12: .WORD 511
      17 001022 000512                  A13: .WORD 512
      18 001024 000513                  A14: .WORD 513
      19 001026 000514                  A15: .WORD 514
      20                                    .END PTR
      21                                
      22                                ;  Array to be indexed
      23                                	.PSECT ARRAY2, ABS
      24 000500                         	.=500
      25 000500    264                  B1: .BYTE 264
      26 000501    265                  B2: .BYTE 265
      27 000502    266                  B3: .BYTE 266
      28 000503    123                  B4: .BYTE 123
      29 000504    124                  B5: .BYTE 124
      30 000505    125                  B6: .BYTE 125
      31 000506    126                  B7: .BYTE 126
      32                                	.END ARRAY2
      33                                
      34 000507    125                  A:	.BYTE 125
      35 000510    252                  B:	.BYTE 252
      36 000511    155                  C:	.BYTE 155
      37 000512    100                  D:	.BYTE 100
      38                                
      39 005000                         	.=5000
      40                                	.PSECT PGM, REL
      41                                	; deferred mode check
      42                                START:
      43 000000 012706  000500          	MOV #B1,SP ; init SP=500
      44 000004 012700  000500          	MOV #B1,r0 ; pseudo SP, r0=500
      45                                
      46 000010 112601                  	MOVB (SP)+, r1	 ; r1=264, SP=502
      47 000012 112003                  	MOVB (r0)+, r3  ; r3=264, r0=501
      48                                	
      49 000014 112602                  	MOVB (SP)+, r2  ; r2=266, SP=504
      50 000016 112004                  	MOVB (r0)+, r4  ; r4=265, r0=502
      51                                
      52 000020 110105                  	MOVB r1, r5     ; r5=264
      53 000022 060205                  	ADD  r2, r5     ; r5=152
      54 000024 110526                  	MOVB r5, (SP)+  ; [504]=152, SP=506
      55                                
      56 000026 105200                  	INCB r0		; r0=503
      57 000030 110305                  	MOVB r3, r5	; r5=264
      58 000032 060405                  	ADD  r4, r5	; r5=151
      59 000034 110520                  	MOVB r5, (r0)+  ; [503]=151, r0=504
      60                                
      61 000036 012706  001000          	MOV #A1,SP ; init SP=1000
      62 000042 012700  001000          	MOV #A1,r0 ; pseudo SP, r0=1000
      63                                
      64 000046 113601                  	MOVB @(SP)+, r1	 ; r1=264, SP=1002
      65 000050 113003                  	MOVB @(r0)+, r3  ; r3=264, r0=1002
      66                                	
      67 000052 113602                  	MOVB @(SP)+, r2  ; r2=265, SP=1004
      68 000054 113004                  	MOVB @(r0)+, r4  ; r4=265, r0=1004
      69                                
      70 000056 110105                  	MOVB r1, r5     ; r5=264
      71 000060 060205                  	ADD  r2, r5     ; r5=151
      72 000062 110536                  	MOVB r5, @(SP)+  ; [502]=151, SP=1006
      73                                
      74 000064 062700  000002          	ADD #2, r0	; r0=1006
      75 000070 110305                  	MOVB r3, r5	; r5=264
      76 000072 060405                  	ADD  r4, r5	; r5=151
      77 000074 110530                  	MOVB r5, @(r0)+  ; [503]=151, r0=1006
      78                                
      79 000076 000000                  	HALT
      80                                	.END START
      81                                
      82                                
      83                                
      84                                
      85                                
      86                                
      87                                
      88                                
      89                                
      90                                
      91                                
      92                                
      93                                
      94                                
      95                                
      96                                
      97                                
      98                                
      99                                
     100                                
     101                                
     102                                
     103                                
     104                                
     105                                
     106                                
     107                                
     108                                
     109                                
     110                                
     111                                
     112                                
     113                                
     114 000100 000000                  	HALT
     115                                	.END START 	
     115                                
